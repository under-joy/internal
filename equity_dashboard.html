<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equity Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="logo">
            <img src="https://via.placeholder.com/150x50" alt="Logo">
        </div>
        <div class="menu">
            <a href="index.html">Employee Portal</a>
            <a href="equity_dashboard_admin.html">Equity Dashboard</a>
            <a href="#">Admin</a>
        </div>
        <div class="hamburger" onclick="toggleMenu()">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <div class="user-icon">
            <img src="https://via.placeholder.com/30" alt="User Icon">
        </div>
    </nav>

    <div class="dashboard-container">
        <header>
            <h1>Equity Dashboard</h1>
            <p>Clean corporate view — light theme</p>
            <button onclick="resetData()">Reset Data</button>
            <button onclick="downloadHTML()">Download HTML</button>
        </header>

        <nav>
            <button class="active">Dashboard</button>
            <button>Add Shareholder</button>
            <button>Add Investment</button>
            <button>Simulator</button>
            <button>Export CSV</button>
        </nav>

        <section>
            <h2>Tip</h2>
            <p>Data is stored in your browser (LocalStorage). Use Export to backup.</p>
        </section>

        <section class="dashboard-summary">
            <div class="valuation">
                <h3>Current Valuation</h3>
                <p>₹1,150,000</p>
                <p>Current Share Price: ₹19.09</p>
            </div>
            <div class="raised">
                <h3>Total Raised</h3>
                <p>₹172,000</p>
                <p>Latest Issued Shares: 60238</p>
                <p>OK Authorized vs Issued</p>
            </div>
        </section>

        <section class="charts">
            <div class="ownership-chart">
                <h3>Ownership Distribution</h3>
                <h4>Current Cap Table</h4>
                <button onclick="refreshCharts()">Refresh Charts</button>
                <canvas id="ownershipChart"></canvas>
            </div>
            <div class="valuation-chart">
                <canvas id="valuationChart"></canvas>
            </div>
        </section>

        <section class="cap-table">
            <h2>Cap Table</h2>
            <table>
                <thead>
                    <tr>
                        <th>Shareholder</th>
                        <th>Shares</th>
                        <th>% Ownership</th>
                        <th>Total Invested</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Bhaskar</td><td>6,000</td><td>9.96%</td><td>₹12,000</td></tr>
                    <tr><td>ESOP Pool</td><td>39,000</td><td>64.74%</td><td>₹0</td></tr>
                    <tr><td>Dipankar (Founder)</td><td>5,000</td><td>8.30%</td><td>₹10,000</td></tr>
                    <tr><td>Investor 1</td><td>10,238</td><td>17.00%</td><td>₹0</td></tr>
                </tbody>
            </table>
        </section>
    </div>

    <footer>
        <p>Equity Dashboard • LocalStorage copy • Built for you</p>
        <p>© 2025 Company Name. All Rights Reserved.</p>
    </footer>

    <script src="script.js"></script>
    <script>
        // Ownership Distribution Pie Chart
        const ctx1 = document.getElementById('ownershipChart').getContext('2d');
        new Chart(ctx1, {
            type: 'pie',
            data: {
                labels: ['Bhaskar', 'ESOP Pool', 'Dipankar (Founder)', 'Investor 1'],
                datasets: [{
                    data: [6000, 39000, 5000, 10238],
                    backgroundColor: ['#36A2EB', '#FF6384', '#FFCE56', '#4BC0C0']
                }]
            }
        });

        // Post-money Valuation Line Chart
        const ctx2 = document.getElementById('valuationChart').getContext('2d');
        new Chart(ctx2, {
            type: 'line',
            data: {
                labels: ['2025-08-15', '2025-08-16'],
                datasets: [{
                    label: 'Post-money valuation',
                    data: [500000, 1150000],
                    borderColor: '#36A2EB',
                    fill: false
                }]
            },
            options: {
                scales: { y: { beginAtZero: true } }
            }
        });

        function resetData() {
            localStorage.clear();
            location.reload();
        }

        function downloadHTML() {
            const html = document.documentElement.outerHTML;
            const blob = new Blob([html], { type: 'text/html' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'equity_dashboard.html';
            a.click();
        }

        function refreshCharts() {
            ctx1.canvas.parentNode.removeChild(ctx1.canvas);
            const newCanvas1 = document.createElement('canvas');
            newCanvas1.id = 'ownershipChart';
            document.querySelector('.ownership-chart').appendChild(newCanvas1);
            new Chart(document.getElementById('ownershipChart').getContext('2d'), {
                type: 'pie',
                data: {
                    labels: ['Bhaskar', 'ESOP Pool', 'Dipankar (Founder)', 'Investor 1'],
                    datasets: [{
                        data: [6000, 39000, 5000, 10238],
                        backgroundColor: ['#36A2EB', '#FF6384', '#FFCE56', '#4BC0C0']
                    }]
                }
            });

            ctx2.canvas.parentNode.removeChild(ctx2.canvas);
            const newCanvas2 = document.createElement('canvas');
            newCanvas2.id = 'valuationChart';
            document.querySelector('.valuation-chart').appendChild(newCanvas2);
            new Chart(document.getElementById('valuationChart').getContext('2d'), {
                type: 'line',
                data: {
                    labels: ['2025-08-15', '2025-08-16'],
                    datasets: [{
                        label: 'Post-money valuation',
                        data: [500000, 1150000],
                        borderColor: '#36A2EB',
                        fill: false
                    }]
                },
                options: { scales: { y: { beginAtZero: true } } }
            });
        }
    </script>
</body>
</html>
